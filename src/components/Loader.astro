<!-- Component TEMPLATE -->
<div id="siteLoader"></div>

<!-- Component STYLES -->
<style is:global>
	#siteLoader {
		position: fixed;
		z-index: var(--layer--above-all);
		height: 100%;
		width: 100%;
		background-color: #000;

		transition: opacity 900ms var(--easeOut);
	}

	.page--loaded #siteLoader {
		opacity: 0;
		pointer-events: none;
	}
</style>

<!-- Component SCRIPTS -->
<script>
	/**
	 * Execute in windowLoad() so the loader
	 * goes away as soon as the page is loaded.
	 * Remove it from the DOM after X seconds, just in case.
	 */
	function exitLoader() {
		const loaderElement = document.querySelector("#siteLoader");

		if (loaderElement) {
			const bodyElement = document.querySelector(`body`);
			bodyElement.classList.add(`page--loaded`);

			if (window.DEBUG) console.log(`Loader has been dismissed.`);

			// Escape the Loader
			setTimeout(() => {
				loaderElement.remove();

				if (window.DEBUG) console.log(`Loader has been destroyed.`);
			}, 7000);
		}
	}
	window.addEventListener("load", exitLoader, false);
</script>
